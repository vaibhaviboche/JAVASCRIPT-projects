<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Theme Switcher</title>
  <style>
    body.theme-light {
      background-color: #fdf6e3;
      color: #333;
    }

    body.theme-dark {
      background-color: #1e1e1e;
      color: #f5f5f5;
    }

    #theme-dropdown {
      background: white;
      border: 1px solid #ccc;
      padding: 0;
      margin-top: 10px;
      list-style: none;
      width: 200px;
    }

    #theme-dropdown li {
      padding: 10px;
      cursor: pointer;
    }

    #theme-dropdown li:hover {
      background-color: #eee;
    }

    #theme-message {
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <button
    id="theme-switcher-button"
    aria-haspopup="true"
    aria-expanded="false"
    aria-controls="theme-dropdown"
  >
    Switch Theme
  </button>

  <ul
    id="theme-dropdown"
    role="menu"
    aria-labelledby="theme-switcher-button"
    hidden
  >
    <li id="theme-light" role="menu-item">Light</li>
    <li id="theme-dark" role="menu-item">Dark</li>
  </ul>

  <div id="theme-message" aria-live="polite"></div>

  <script>
    const button = document.getElementById("theme-switcher-button");
    const dropdown = document.getElementById("theme-dropdown");
    const themeMessage = document.getElementById("theme-message");
    const themeItems = dropdown.querySelectorAll('[role="menu-item"]');

    const themes = [
      {
        name: "light",
        message: "Light theme activated. Shine on! ☀️"
      },
      {
        name: "dark",
        message: "Dark theme activated. Welcome to the shadows 🌙"
      }
    ];

    // Toggle dropdown visibility
    button.addEventListener("click", () => {
      const isOpen = button.getAttribute("aria-expanded") === "true";
      button.setAttribute("aria-expanded", String(!isOpen));
      dropdown.hidden = isOpen;
    });

    // Handle theme selection
    themeItems.forEach(item => {
      item.addEventListener("click", () => {
        const themeName = item.id.replace("theme-", "");

        // Remove all theme classes
        document.body.classList.remove(...themes.map(t => `theme-${t.name}`));

        // Add selected theme class
        document.body.classList.add(`theme-${themeName}`);

        // Update message
        const theme = themes.find(t => t.name === themeName);
        if (theme) {
          themeMessage.textContent = theme.message;
        }

        // Close dropdown
        dropdown.hidden = true;
        button.setAttribute("aria-expanded", "false");
      });
    });
  </script>
</body>
</html>
